import{isServer as g,createComponent as T,spread as m,useAssets as j,ssr as O,escape as h,getRequestEvent as P}from"solid-js/web";import{createContext as b,createUniqueId as N,useContext as R,createRenderEffect as S,onCleanup as y,sharedConfig as k}from"solid-js";const x=[{type:"page",$component:{src:"src/routes/[...404].jsx?pick=default&pick=$css",build:()=>import("../_...404_.js"),import:()=>import("../_...404_.js")},path:"/*404",filePath:"/Users/patrick/Sites/cyprus-developer-community/cdc.cy/src/routes/[...404].jsx"},{type:"page",$component:{src:"src/routes/index.jsx?pick=default&pick=$css",build:()=>import("../index.js"),import:()=>import("../index.js")},path:"/",filePath:"/Users/patrick/Sites/cyprus-developer-community/cdc.cy/src/routes/index.jsx"}],L=E(x.filter(r=>r.type==="page")),w=M(x.filter(r=>r.type==="api"));function V(r,t){const e=r.replace("","").split("/").filter(Boolean);e:for(const n of w){const s=n.matchSegments;if(e.length<s.length||!n.wildcard&&e.length>s.length)continue;for(let o=0;o<s.length;o++){const a=s[o];if(a&&e[o]!==a)continue e}const c=n[`$${t}`];if(c==="skip"||c===void 0)return;const i={};for(const{type:o,name:a,index:p}of n.params)o===":"?i[a]=e[p]:i[a]=e.slice(p).join("/");return{handler:c,params:i}}}function E(r){function t(e,n,s,c){const i=Object.values(e).find(o=>s.startsWith(o.id+"/"));return i?(t(i.children||(i.children=[]),n,s.slice(i.id.length)),e):(e.push({...n,id:s,path:s.replace(/\/\([^)/]+\)/g,"")}),e)}return r.sort((e,n)=>e.path.length-n.path.length).reduce((e,n)=>t(e,n,n.path,n.path),[])}function M(r){return r.flatMap(t=>v(t.path).map(n=>({...t,path:n}))).map(A).sort((t,e)=>e.score-t.score)}function v(r){let t=/(\/?\:[^\/]+)\?/.exec(r);if(!t)return[r];let e=r.slice(0,t.index),n=r.slice(t.index+t[0].length);const s=[e,e+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(n);)s.push(e+=t[1]),n=n.slice(t[0].length);return v(n).reduce((c,i)=>[...c,...s.map(o=>o+i)],[])}function A(r){const t=r.path.split("/").filter(Boolean),e=[],n=[];let s=0,c=!1;for(const[i,o]of t.entries())if(o[0]===":"){const a=o.slice(1);s+=3,e.push({type:":",name:a,index:i}),n.push(null)}else o[0]==="*"?(s-=1,e.push({type:"*",name:o.slice(1),index:i}),c=!0):(s+=4,o.match(/^\(.+\)$/)||n.push(o));return{...r,score:s,params:e,matchSegments:n,wildcard:c}}const $=b(),C=["title","meta"],u=[],f=["name","http-equiv","content","charset","media"].concat(["property"]),d=(r,t)=>{const e=Object.fromEntries(Object.entries(r.props).filter(([n])=>t.includes(n)).sort());return(Object.hasOwn(e,"name")||Object.hasOwn(e,"property"))&&(e.name=e.name||e.property,delete e.property),r.tag+JSON.stringify(e)};function q(){if(!k.context){const e=document.head.querySelectorAll("[data-sm]");Array.prototype.forEach.call(e,n=>n.parentNode.removeChild(n))}const r=new Map;function t(e){if(e.ref)return e.ref;let n=document.querySelector(`[data-sm="${e.id}"]`);return n?(n.tagName.toLowerCase()!==e.tag&&(n.parentNode&&n.parentNode.removeChild(n),n=document.createElement(e.tag)),n.removeAttribute("data-sm")):n=document.createElement(e.tag),n}return{addTag(e){if(C.indexOf(e.tag)!==-1){const c=e.tag==="title"?u:f,i=d(e,c);r.has(i)||r.set(i,[]);let o=r.get(i),a=o.length;o=[...o,e],r.set(i,o);let p=t(e);e.ref=p,m(p,e.props);let l=null;for(var n=a-1;n>=0;n--)if(o[n]!=null){l=o[n];break}return p.parentNode!=document.head&&document.head.appendChild(p),l&&l.ref&&document.head.removeChild(l.ref),a}let s=t(e);return e.ref=s,m(s,e.props),s.parentNode!=document.head&&document.head.appendChild(s),-1},removeTag(e,n){const s=e.tag==="title"?u:f,c=d(e,s);if(e.ref){const i=r.get(c);if(i){if(e.ref.parentNode){e.ref.parentNode.removeChild(e.ref);for(let o=n-1;o>=0;o--)i[o]!=null&&document.head.appendChild(i[o].ref)}i[n]=null,r.set(c,i)}else e.ref.parentNode&&e.ref.parentNode.removeChild(e.ref)}}}}function I(){const r=[];return j(()=>O(U(r))),{addTag(t){if(C.indexOf(t.tag)!==-1){const e=t.tag==="title"?u:f,n=d(t,e),s=r.findIndex(c=>c.tag===t.tag&&d(c,e)===n);s!==-1&&r.splice(s,1)}return r.push(t),r.length},removeTag(t,e){}}}const W=r=>{const t=g?I():q();return T($.Provider,{value:t,get children(){return r.children}})},K=(r,t,e)=>(H({tag:r,props:t,setting:e,id:N(),get name(){return t.name||t.property}}),null);function H(r){const t=R($);if(!t)throw new Error("<MetaProvider /> should be in the tree");S(()=>{const e=t.addTag(r);y(()=>t.removeTag(r,e))})}function U(r){return r.map(t=>{const n=Object.keys(t.props).map(c=>c==="children"?"":` ${c}="${h(t.props[c],!0)}"`).join(""),s=t.props.children;return t.setting?.close?`<${t.tag} data-sm="${t.id}"${n}>${t.setting?.escape?h(s):s||""}</${t.tag}>`:`<${t.tag} data-sm="${t.id}"${n}/>`}).join("")}const z=r=>K("title",r,{escape:!0,close:!0});function F(r){if(g){const t=P();t&&y(t.components.status(r))}return null}export{F as H,W as M,z as T,V as m,L as p};
