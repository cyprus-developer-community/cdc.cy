query getUpcomingEvents(
  $owner: String!
  $repo: String!
  $size: Int!
  $after: String
) {
  repository(owner: $owner, name: $repo) {
    issues(
      filterBy: { labels: "Approved :white_check_mark:" }
      orderBy: { field: CREATED_AT, direction: ASC }
      after: $after
      first: $size
      states: OPEN
    ) {
      nodes {
        id
        url
        title
        body
        bodyHTML
        createdAt
        updatedAt
        publishedAt
        state
        closed
        number
        closedAt
        author {
          ...getUpcomingEventUserFragment
        }
        participants(first: 20) {
          nodes {
            ...getUpcomingEventUserFragment
          }
        }
        reactions(first: 100) {
          nodes {
            user {
              ...getUpcomingEventUserFragment
            }
          }
          totalCount
        }
        labels(first: 10) {
          nodes {
            name
            description
            url
            color
          }
        }
      }
      pageInfo {
        endCursor
        hasNextPage
        hasPreviousPage
      }
      totalCount
    }
  }
}

fragment getUpcomingEventUserFragment on User {
  id
  name
  login
  url
  avatarUrl
}
